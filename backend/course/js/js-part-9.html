<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Part 9: Deep Dive into APIs üåêüîó</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        :root {
            --primary-color: #6a11cb; /* Vibrant Purple */
            --secondary-color: #2575fc; /* Bright Blue */
            --accent-color: #ffde59; /* Sunny Yellow */
            --success-color: #4caf50; /* Green */
            --warning-color: #ff9800; /* Orange */
            --danger-color: #f44336; /* Red */
            --info-color: #17a2b8; /* Teal */
            --text-color: #34495e; /* Dark Slate Blue */
            --light-bg: #f0f4f8; /* Light Sky Blue */
            --white-bg: #ffffff;
            --code-bg: #2d2d2d;
            --border-radius-main: 20px;
            --border-radius-inner: 12px;
            --box-shadow-main: 0 10px 30px rgba(0, 0, 0, 0.1);
            --box-shadow-light: 0 5px 15px rgba(0, 0, 0, 0.07);
        }

        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 10px;
            line-height: 1.7;
            color: var(--text-color);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            overflow-x: hidden;
            font-size: 16px;
        }

        .main-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius-main);
            box-shadow: var(--box-shadow-main);
        }

        h1, h2, h3, h4 {
            font-weight: 700;
            word-wrap: break-word;
        }

        h1 {
            color: var(--primary-color);
            text-align: center;
            font-size: 2.5em;
            font-weight: 900;
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        h1 .fas {
            margin: 0 10px;
            font-size: 0.8em;
            color: var(--secondary-color);
        }

        h2 {
            color: var(--secondary-color);
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 3px solid var(--accent-color);
            display: flex;
            align-items: center;
        }
        h2 .fas, h2 .far {
            margin-right: 10px;
            color: var(--primary-color);
            font-size: 0.9em;
        }

        h3 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        h3 .fas, h3 .far {
            margin-right: 8px;
            font-size: 0.85em;
            color: var(--secondary-color);
        }

        h4 {
            color: var(--accent-color);
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        h4 .fas, h4 .far {
            margin-right: 6px;
            font-size: 0.8em;
            color: var(--primary-color);
        }

        .section {
            background-color: var(--white-bg);
            border-radius: var(--border-radius-inner);
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--box-shadow-light);
            border: 1px solid #e0e0e0;
            opacity: 0;
            transform: translateY(20px);
        }

        pre[class*="language-"] {
            background: var(--code-bg);
            border-radius: var(--border-radius-inner);
            padding: 15px;
            margin: 15px 0;
            font-size: 0.9em;
            border: 1px solid var(--accent-color);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            overflow-x: auto;
        }
        code[class*="language-"] {
            font-family: 'Courier New', Courier, monospace;
            word-wrap: normal;
            white-space: pre;
        }
        .token.comment { color: #797979; font-style: italic; }
        .token.keyword { color: #61dafb; }
        .token.string { color: #90ee90; }
        .token.number { color: #f08080; }
        .token.boolean { color: #add8e6; }
        .token.function { color: #ffd700; }
        .token.operator { color: #f39c12; }
        .token.punctuation { color: #ecf0f1; }

        .analogy-box {
            background-color: #fff9e6;
            border: 2px dashed #ffc107;
            border-radius: var(--border-radius-inner);
            padding: 15px;
            margin: 20px 0;
            font-style: italic;
            position: relative;
            overflow: hidden;
        }
        .analogy-box strong { color: #e65100; }
        .analogy-box::before {
            content: "\f0eb";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            position: absolute;
            top: -15px;
            left: -10px;
            font-size: 40px;
            color: rgba(255, 193, 7, 0.15);
            transform: rotate(-15deg);
        }

        .info-box {
            background-color: #e6f3ff;
            border: 2px solid var(--info-color);
            border-radius: var(--border-radius-inner);
            padding: 15px;
            margin: 20px 0;
            position: relative;
        }
        .info-box::before {
            content: "\f05a";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            color: var(--info-color);
            font-size: 1.2em;
            margin-right: 8px;
        }
        .info-box strong {
            color: #0c5460;
        }

        .warning-box {
            background-color: #fff3e0;
            border: 2px solid var(--warning-color);
            border-radius: var(--border-radius-inner);
            padding: 15px;
            margin: 20px 0;
            position: relative;
        }
        .warning-box::before {
            content: "\f071";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            color: var(--warning-color);
            font-size: 1.2em;
            margin-right: 8px;
        }
        .warning-box strong {
            color: #e65100;
        }

        .success-box {
            background-color: #e8f5e8;
            border: 2px solid var(--success-color);
            border-radius: var(--border-radius-inner);
            padding: 15px;
            margin: 20px 0;
            position: relative;
        }
        .success-box::before {
            content: "\f058";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            color: var(--success-color);
            font-size: 1.2em;
            margin-right: 8px;
        }
        .success-box strong {
            color: #2e7d32;
        }

        /* Flow Diagram Styles */
        .flow-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: var(--border-radius-inner);
            margin: 25px 0;
            border: 2px solid var(--secondary-color);
            box-shadow: var(--box-shadow-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            position: relative;
        }

        .flow-step {
            background: white;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 15px;
            margin: 10px;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
        }

        .flow-step.client {
            border-color: var(--success-color);
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8f1 100%);
        }

        .flow-step.server {
            border-color: var(--info-color);
            background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%);
        }

        .flow-step.api {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, #fff3e0 0%, #fff8f0 100%);
        }

        .flow-arrow {
            font-size: 2em;
            color: var(--accent-color);
            margin: 0 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        .url-breakdown {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid var(--accent-color);
            border-radius: var(--border-radius-inner);
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--box-shadow-light);
        }

        .url-part {
            display: inline-block;
            padding: 8px 12px;
            margin: 5px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: 700;
            font-size: 0.9em;
        }

        .protocol { background-color: #ffebee; color: #c62828; }
        .domain { background-color: #e8f5e8; color: #2e7d32; }
        .path { background-color: #fff3e0; color: #ef6c00; }
        .query { background-color: #e3f2fd; color: #1565c0; }

        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .method-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid var(--accent-color);
            border-radius: var(--border-radius-inner);
            padding: 15px;
            box-shadow: var(--box-shadow-light);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .method-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .method-name {
            color: var(--primary-color);
            font-weight: 800;
            font-size: 1.1em;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        .method-name .fas {
            margin-right: 8px;
            color: var(--accent-color);
            font-size: 0.9em;
        }

        .status-code {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-weight: 700;
            font-size: 0.9em;
            margin: 2px;
        }

        .status-200 { background-color: #e8f5e8; color: #2e7d32; }
        .status-400 { background-color: #fff3e0; color: #ef6c00; }
        .status-500 { background-color: #ffebee; color: #c62828; }

        .api-demo {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border: 2px solid var(--info-color);
            border-radius: var(--border-radius-inner);
            padding: 20px;
            margin: 20px 0;
            box-shadow: var(--box-shadow-light);
        }

        .demo-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 700;
            margin: 5px;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .demo-button:hover {
            transform: scale(1.03) translateY(-1px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        }

        .demo-output {
            background: #1e1e1e;
            color: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .emoji {
            font-size: 1.2em;
            margin-right: 8px;
            vertical-align: middle;
        }

        ul { list-style-type: none; padding-left: 0; }
        ul li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }
        ul li::before {
            content: "\f138";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            position: absolute;
            left: 0;
            color: var(--secondary-color);
            font-size: 1em;
        }

        .highlight {
            background-color: var(--accent-color);
            padding: 2px 5px;
            border-radius: 5px;
            font-weight: bold;
            color: var(--text-color);
        }

        .button-style {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 700;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-block;
        }
        .button-style:hover {
            transform: scale(1.03) translateY(-1px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body { padding: 5px; font-size: 15px; }
            .main-container { margin: 10px auto; padding: 10px; }
            h1 { font-size: 2em; margin-bottom: 25px; }
            h2 { font-size: 1.6em; margin-bottom: 15px; }
            h3 { font-size: 1.25em; margin-top: 15px; margin-bottom: 10px; }
            h4 { font-size: 1.1em; margin-top: 15px; margin-bottom: 8px; }
            .section { padding: 15px; margin: 15px 0; }
            pre[class*="language-"] { padding: 10px; font-size: 0.85em; }
            .method-grid { grid-template-columns: 1fr; gap: 10px; }
            .flow-container { flex-direction: column; padding: 15px; }
            .flow-arrow { transform: rotate(90deg); margin: 10px 0; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.4em; }
            h3 { font-size: 1.1em; }
            h4 { font-size: 1em; }
            body { font-size: 14px; }
            .section, .analogy-box, .info-box, .warning-box, .success-box, pre[class*="language-"] { padding: 10px; }
            pre[class*="language-"] { font-size: 0.8em; }
            .button-style { width: 100%; text-align: center; }
            .url-part { font-size: 0.8em; padding: 6px 8px; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h1><i class="fas fa-network-wired emoji"></i>Understanding APIs: Your Guide to Web Data Exchange<i class="fas fa-cogs emoji"></i></h1>

        <div class="section">
            <h2><i class="fas fa-question-circle"></i> What is an API? The URL for Programs</h2>
            <p>An API (Application Programming Interface) is essentially a <strong class="highlight">specialized URL (web address)</strong> that software programs use to communicate with each other. Instead of a human typing a URL into a browser to see a webpage, one program "calls" an API URL to get data or tell another program to do something.</p>
            <p>Think of it like this: when you visit a website, your browser requests information from a server using a URL, and the server sends back a webpage. APIs work similarly, but they are designed for <strong class="highlight">program-to-program interaction</strong>, often exchanging data in formats like JSON rather than full HTML webpages.</p>
            <p>APIs define:
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> The <strong class="highlight">endpoints (specific URLs)</strong> to access.</li>
                    <li><i class="fas fa-handshake"></i> The <strong class="highlight">methods (actions like GET, POST)</strong> that can be performed.</li>
                    <li><i class="fas fa-box-open"></i> The <strong class="highlight">format of the data</strong> to be exchanged (e.g., JSON).</li>
                    <li><i class="fas fa-shield-alt"></i> The <strong class="highlight">rules for authentication</strong> (who is allowed to access).</li>
                </ul>
            </p>
        </div>

        <div class="section">
            <h2><i class="fas fa-link"></i> Understanding URLs: The Address of the API</h2>
            <p>Since APIs are accessed via URLs, it's crucial to understand what a URL is. A URL (Uniform Resource Locator) is the unique address for a resource on the web. For APIs, this resource is often a specific piece of data or a service.</p>
            <p>Let's break down a typical API URL: <code>https://api.example.com/v1/users?id=123</code></p>
            <div class="url-breakdown">
                <span class="url-part protocol">https://</span>
                <span class="url-part domain">api.example.com</span>
                <span class="url-part path">/v1/users</span>
                <span class="url-part query">?id=123</span>
            </div>
            <ul>
                <li><strong class="highlight">Protocol (<code>https://</code>):</strong> Defines how data is transferred. <code>https</code> means secure transfer.</li>
                <li><strong class="highlight">Domain (<code>api.example.com</code>):</strong> The "main address" of the server hosting the API.</li>
                <li><strong class="highlight">Path (<code>/v1/users</code>):</strong> Specifies the exact resource you want to access on the server (e.g., version 1 of the users data). API endpoints are defined by these paths.</li>
                <li><strong class="highlight">Query Parameters (<code>?id=123</code>):</strong> Optional key-value pairs that provide extra information for the request, like filtering results (e.g., get user with id 123). Starts with <code>?</code>, pairs separated by <code>&</code>.</li>
            </ul>
            <p>When your JavaScript code calls an API, it's sending a request to a URL structured like this.</p>
        </div>

        <div class="section">
            <h2><i class="fas fa-exchange-alt"></i> How APIs Work: Client, Server, and Data Flow</h2>
            <p>API communication follows a <strong class="highlight">request-response model</strong> between a client and a server.</p>
            <ul>
                <li><strong>Client:</strong> The application that <strong class="highlight">initiates the request</strong>. This could be your JavaScript code running in a web browser, a mobile app, or even another server.</li>
                <li><strong>Server:</strong> A powerful computer or program that <strong class="highlight">hosts the API and its data/services</strong>. It listens for incoming requests, processes them, and sends back a response.</li>
            </ul>

            <div class="flow-container">
                <div class="flow-step client">
                    <div class="step-icon"><i class="fas fa-laptop-code"></i></div>
                    <div class="step-content">
                        <div class="step-title">1. Client Application</div>
                        <div class="step-description">Your JS code, app, etc.</div>
                    </div>
                </div>
                <div class="flow-arrow"><i class="fas fa-arrow-right"></i></div>
                <div class="flow-step api">
                    <div class="step-icon"><i class="fas fa-paper-plane"></i></div>
                    <div class="step-content">
                        <div class="step-title">2. API Request</div>
                        <div class="step-description">HTTP request to an API URL (endpoint)</div>
                    </div>
                </div>
                <div class="flow-arrow"><i class="fas fa-arrow-right"></i></div>
                <div class="flow-step server">
                    <div class="step-icon"><i class="fas fa-server"></i></div>
                    <div class="step-content">
                        <div class="step-title">3. Server / API Backend</div>
                        <div class="step-description">Processes request, fetches data</div>
                    </div>
                </div>
                 <div class="flow-arrow"><i class="fas fa-arrow-left"></i></div>
                <div class="flow-step api">
                    <div class="step-icon"><i class="fas fa-envelope-open-text"></i></div>
                    <div class="step-content">
                        <div class="step-title">4. API Response</div>
                        <div class="step-description">Data (e.g., JSON) sent back</div>
                    </div>
                </div>
            </div>

            <p>The process:</p>
            <ol>
                <li>The <strong>Client</strong> constructs an HTTP request to a specific API <strong>URL (endpoint)</strong>. This request includes an HTTP method (see below).</li>
                <li>The <strong>Server</strong> receives the request, authenticates it (if needed), and processes it (e.g., queries a database, performs a calculation).</li>
                <li>The <strong>Server</strong> sends an HTTP response back to the Client. This response includes a status code (e.g., 200 for success, 404 for not found) and, typically, the requested data.</li>
            </ol>

            <h3><i class="fas fa-file-alt"></i> API Responses: Data, Not Just Webpages</h3>
            <p>Unlike traditional web servers that return HTML documents for browsers to display, APIs usually return <strong class="highlight">structured data</strong>. The most common format is <strong class="highlight">JSON (JavaScript Object Notation)</strong>.</p>
            <p><strong>Why JSON?</strong></p>
            <ul>
                <li><strong>Lightweight:</strong> It's compact, leading to faster data transfer.</li>
                <li><strong>Human-readable:</strong> Easy for developers to understand.</li>
                <li><strong>Easy for Machines (especially JavaScript):</strong> JavaScript can parse JSON into native objects effortlessly using <code>JSON.parse()</code> (or <code>response.json()</code> with Fetch API).</li>
            </ul>
            <p>Example JSON response for <code>https://api.example.com/v1/users?id=123</code>:</p>
            <pre><code class="language-json">
{
  "id": 123,
  "name": "Alex Doe",
  "email": "alex.doe@example.com",
  "isActive": true
}
            </code></pre>
            <p>Other formats like XML exist but are less common for modern web APIs.</p>

            <h3><i class="fas fa-hand-point-up"></i> Common API Actions: HTTP Methods</h3>
            <p>When a client sends a request to an API, it specifies an <strong class="highlight">HTTP method</strong> (or verb) that tells the server what kind of action to perform on the resource identified by the URL.</p>
            <div class="method-grid">
                <div class="method-card">
                    <div class="method-name"><i class="fas fa-eye"></i> GET</div>
                    <p><strong>Purpose:</strong> Retrieve data from the server.
                    <br><strong>Example:</strong> Fetching a user's profile, a list of products.
                    <br><strong>Characteristics:</strong> Safe (doesn't change server state), Idempotent (multiple identical requests have the same effect as one).</p>
                </div>
                <div class="method-card">
                    <div class="method-name"><i class="fas fa-plus-square"></i> POST</div>
                    <p><strong>Purpose:</strong> Send data to the server to create a new resource.
                    <br><strong>Example:</strong> Creating a new user account, submitting a form.
                    <br><strong>Characteristics:</strong> Not safe (changes server state), Not idempotent (multiple identical requests may create multiple resources).</p>
                </div>
                <div class="method-card">
                    <div class="method-name"><i class="fas fa-edit"></i> PUT</div>
                    <p><strong>Purpose:</strong> Send data to the server to update an existing resource completely.
                    <br><strong>Example:</strong> Updating a user's entire profile.
                    <br><strong>Characteristics:</strong> Not safe, Idempotent (multiple identical requests to update the same resource to the same state have the same effect).</p>
                </div>
                <div class="method-card">
                    <div class="method-name"><i class="fas fa-trash-alt"></i> DELETE</div>
                    <p><strong>Purpose:</strong> Request the server to delete a specific resource.
                    <br><strong>Example:</strong> Deleting a user account.
                    <br><strong>Characteristics:</strong> Not safe, Idempotent (deleting something multiple times results in it being deleted).</p>
                </div>
            </div>
            <p>There are other methods like <code>PATCH</code> (partial update), <code>HEAD</code>, <code>OPTIONS</code>, but GET, POST, PUT, and DELETE are the most fundamental for RESTful APIs.</p>
        </div>

        <div class="section">
            <h2><i class="fas fa-key"></i> API Authentication & Security</h2>
            <p>Many APIs require authentication to ensure that only authorized users or applications can access them. Common methods include:</p>
            <ul>
                <li><strong>API Keys:</strong> A unique key provided to each developer using the API. Sent as a query parameter or header in API requests.</li>
                <li><strong>OAuth:</strong> A more secure method that involves token-based authentication. Users authorize applications to access their data without sharing passwords.</li>
                <li><strong>Basic Auth:</strong> A simple method using a username and password encoded in the request header. Not very secure on its own.</li>
            </ul>
            <div class="info-box">
                <strong>Important:</strong> Always use <strong class="highlight">HTTPS</strong> when working with APIs to encrypt data in transit, especially when sending sensitive information like API keys or passwords.
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-laptop-code"></i> Making API Requests in JavaScript: The `fetch` API</h2>
            <p>Modern JavaScript provides the <strong class="highlight"><code>fetch</code> API</strong> for making network requests, including calls to web APIs. It's promise-based, making asynchronous operations cleaner.</p>

            <div class="api-demo">
                <h4><i class="fas fa-play-circle"></i> Interactive API Demos with `fetch`</h4>
                <p>Click the buttons below to see real API calls using `fetch` in action:</p>
                
                <button class="demo-button" onclick="fetchRandomFact()">
                    <i class="fas fa-lightbulb"></i> Get Random Fact (GET)
                </button>
                
                <button class="demo-button" onclick="fetchDogImage()">
                    <i class="fas fa-dog"></i> Get Random Dog Image (GET)
                </button>
                
                <button class="demo-button" onclick="fetchJoke()">
                    <i class="fas fa-laugh"></i> Get Random Joke (GET)
                </button>
                
                <button class="demo-button" onclick="clearOutput()">
                    <i class="fas fa-eraser"></i> Clear Output
                </button>

                <div class="demo-output" id="apiOutput">
Click a button above to see API responses!
                </div>
            </div>

            <h3><i class="fas fa-code"></i> The Code Behind These Demos (using `fetch`)</h3>
            <pre><code class="language-javascript">
// Helper function to display API responses
function displayOutput(title, data) {
  const output = document.getElementById('apiOutput');
  // Displaying the data as a formatted JSON string
  output.textContent = `${title}\n\n${JSON.stringify(data, null, 2)}`;
}

// Example 1: Getting a random fact using fetch
async function fetchRandomFact() {
  displayOutput('Loading random fact...', {}); // Show loading message
  try {
    // 1. Make the GET request using fetch to the API URL
    const response = await fetch('https://uselessfacts.jsph.pl/random.json?language=en');
    
    // 2. Check if the request was successful (status code 200-299)
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    // 3. Parse the JSON response body
    const data = await response.json(); 
    
    console.log('Fact Data:', data);
    displayOutput('üß† Random Fact API Response:', data);
  } catch (error) {
    console.error('Error fetching fact:', error);
    displayOutput('‚ùå Error fetching fact:', { message: error.message });
  }
}

// Example 2: Getting a random dog image using fetch
async function fetchDogImage() {
  displayOutput('Loading dog image...', {});
  try {
    const response = await fetch('https://dog.ceo/api/breeds/image/random');
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const data = await response.json();
    
    console.log('Dog Image Data:', data);
    // You could create an <img> tag here and set its src to data.message
    displayOutput('üêï Random Dog API Response:', data);
  } catch (error) {
    console.error('Error fetching dog image:', error);
    displayOutput('‚ùå Error fetching dog image:', { message: error.message });
  }
}

// Example 3: Getting a random programming joke using fetch
async function fetchJoke() {
  displayOutput('Loading joke...', {});
  try {
    const response = await fetch('https://official-joke-api.appspot.com/random_joke');
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const data = await response.json();
    
    console.log('Joke Data:', data);
    displayOutput('üòÇ Random Joke API Response:', { 
        setup: data.setup, 
        punchline: data.punchline 
    });
  } catch (error) {
    console.error('Error fetching joke:', error);
    displayOutput('‚ùå Error fetching joke:', { message: error.message });
  }
}

function clearOutput() {
  document.getElementById('apiOutput').textContent = 'Click a button above to see API responses!';
}
            </code></pre>
            <p>Key steps when using `fetch` for a GET request:</p>
            <ol>
                <li>Call <code>fetch('API_URL')</code>. This returns a Promise.</li>
                <li>Use <code>await</code> (in an <code>async</code> function) to wait for the Promise to resolve to a <code>Response</code> object.</li>
                <li>Check <code>response.ok</code> (or <code>response.status</code>) to see if the request was successful.</li>
                <li>If successful, use <code>await response.json()</code> to parse the response body as JSON. This also returns a Promise.</li>
                <li>Handle potential errors using <code>try...catch</code> blocks.</li>
            </ol>
        </div>

        <div class="section">
            <h2><i class="fas fa-tools"></i> Common API Tools & Technologies</h2>
            <p>Here are some tools and technologies that are commonly used when working with APIs:</p>
            <ul>
                <li><strong>Postman:</strong> A popular graphical tool for designing, building, testing, and documenting APIs. Excellent for exploring API requests and responses without writing code.</li>
                <li><strong>cURL:</strong> A command-line tool to transfer data to or from a server using various protocols. Useful for quick API testing from the terminal.</li>
                <li><strong>Browser Developer Tools (Network Tab):</strong> Your browser's built-in tools are invaluable for inspecting API requests made by web pages, viewing headers, and response data.</li>
                <li><strong>Swagger / OpenAPI Specification:</strong> A standard for describing REST APIs. Tools like Swagger UI can generate interactive API documentation from an OpenAPI spec.</li>
            </ul>
             <div class="info-box">
                <strong>Tip:</strong> Use tools like <a href="https://jsonformatter.curiousconcept.com/" target="_blank" rel="noopener noreferrer">JSON Formatter & Validator</a> or browser extensions to format and beautify JSON data for better readability during development.
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-book-reader"></i> Learning Resources & Next Steps</h2>
            <p>Here are some resources to further explore and learn about APIs:</p>
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener noreferrer">MDN Web Docs - Using Fetch</a></li>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank" rel="noopener noreferrer">MDN Web Docs - HTTP Request Methods</a></li>
                <li><a href="https://www.postman.com/learning-center/" target="_blank" rel="noopener noreferrer">Postman Learning Center</a></li>
                <li><a href="https://jsonplaceholder.typicode.com/" target="_blank" rel="noopener noreferrer">JSONPlaceholder - Free Fake API for Testing</a> (Great for practicing GET, POST, PUT, DELETE requests)</li>
                <li><a href="https://public-apis.io/" target="_blank" rel="noopener noreferrer">Public APIs List</a> - A collective list of free APIs for use in software and web development.</li>
            </ul>
            <div class="info-box">
                <strong>Next Steps:</strong> Practice makes perfect! Try to integrate a public API into a simple web application. It could be a weather app, a movie database, a recipe finder, or anything that interests you. Experiment with different HTTP methods.
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-graduation-cap"></i> Summary: Key API Concepts</h2>
            <p>Congratulations! You've now explored the fundamentals of APIs in the context of web development. Key takeaways:</p>
            <ul>
                <li>APIs are like <strong class="highlight">specialized URLs</strong> that allow programs to exchange data and services.</li>
                <li>Understanding <strong class="highlight">URL components</strong> (protocol, domain, path, query parameters) is key to working with API endpoints.</li>
                <li>APIs operate on a <strong class="highlight">client-server, request-response model</strong>.</li>
                <li>APIs typically return <strong class="highlight">data (often JSON)</strong> rather than full HTML webpages.</li>
                <li><strong class="highlight">HTTP methods</strong> (GET, POST, PUT, DELETE) define the action to be performed on an API resource.</li>
                <li>The JavaScript <strong class="highlight"><code>fetch</code> API</strong> is the standard way to make API requests in modern browsers.</li>
                <li><strong class="highlight">Authentication</strong> is often required for secure API access, and <strong class="highlight">HTTPS</strong> is crucial.</li>
                <li>Tools like Postman and browser dev tools aid in API development and testing.</li>
            </ul>
            <div class="success-box">
                <strong>Keep Exploring!</strong> The world of APIs is vast. Consider learning about RESTful API design principles, GraphQL, API versioning, and even building your own APIs with backend technologies.
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
        // Interactive API demo functions
        async function fetchRandomFact() {
            const output = document.getElementById('apiOutput');
            output.textContent = 'Loading random fact...';
            
            try {
                const response = await fetch('https://uselessfacts.jsph.pl/random.json?language=en');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                }
                const data = await response.json();
                
                displayOutput('üß† Random Fact API Response:', {
                    fact: data.text,
                    source: data.source_url || data.source, // some APIs might use source_url
                    full_response: data
                });
            } catch (error) {
                console.error('Error fetching fact:', error);
                displayOutput('‚ùå Error fetching fact:', { 
                    message: error.message,
                    note: 'This might be a CORS issue, network problem, or the API is temporarily down.'
                });
            }
        }

        async function fetchDogImage() {
            const output = document.getElementById('apiOutput');
            output.textContent = 'Loading random dog image...';
            
            try {
                const response = await fetch('https://dog.ceo/api/breeds/image/random');
                 if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                }
                const data = await response.json();
                
                displayOutput('üêï Random Dog API Response:', {
                    image_url: data.message,
                    status: data.status,
                    note: 'You can use this URL in an <img> tag to display the image!'
                });
            } catch (error) {
                console.error('Error fetching dog image:', error);
                displayOutput('‚ùå Error fetching dog image:', { 
                    message: error.message,
                    note: 'This might be a network issue or API problem.'
                });
            }
        }

        async function fetchJoke() {
            const output = document.getElementById('apiOutput');
            output.textContent = 'Loading random joke...';
            
            try {
                const response = await fetch('https://official-joke-api.appspot.com/random_joke');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                }
                const data = await response.json();
                
                displayOutput('üòÇ Random Joke API Response:', {
                    setup: data.setup,
                    punchline: data.punchline,
                    type: data.type,
                    id: data.id,
                    complete_joke: `${data.setup} ... ${data.punchline}`
                });
            } catch (error) {
                console.error('Error fetching joke:', error);
                displayOutput('‚ùå Error fetching joke:', { 
                    message: error.message,
                    note: 'This might be a network issue or API problem.'
                });
            }
        }

        function displayOutput(title, data) {
            const output = document.getElementById('apiOutput');
            output.textContent = `${title}\n\n${JSON.stringify(data, null, 2)}`;
        }

        function clearOutput() {
            document.getElementById('apiOutput').textContent = 'Click a button above to see API responses!';
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Prism for syntax highlighting
            Prism.highlightAll();

            // GSAP Animations
            gsap.registerPlugin(ScrollTrigger);

            // Animate sections
            gsap.utils.toArray('.section').forEach(section => {
                gsap.fromTo(section,
                    { autoAlpha: 0, y: 30 },
                    {
                        autoAlpha: 1,
                        y: 0,
                        duration: 0.6,
                        ease: "power1.out",
                        scrollTrigger: {
                            trigger: section,
                            start: "top 88%",
                            toggleActions: "play none none none",
                        }
                    }
                );
            });

            // Animate method cards
            gsap.utils.toArray('.method-card').forEach((card, index) => {
                gsap.fromTo(card,
                    { autoAlpha: 0, y: 20, scale: 0.95 },
                    {
                        autoAlpha: 1,
                        y: 0,
                        scale: 1,
                        duration: 0.4,
                        delay: index * 0.1,
                        ease: "power1.out",
                        scrollTrigger: {
                            trigger: card,
                            start: "top 90%",
                            toggleActions: "play none none none",
                        }
                    }
                );
            });

            // Animate flow steps
            gsap.utils.toArray('.flow-step').forEach((step, index) => {
                gsap.fromTo(step,
                    { autoAlpha: 0, x: index % 2 === 0 ? -30 : 30 },
                    {
                        autoAlpha: 1,
                        x: 0,
                        duration: 0.8,
                        delay: index * 0.3,
                        ease: "power2.out",
                        scrollTrigger: {
                            trigger: step.closest('.flow-container'),
                            start: "top 80%",
                            toggleActions: "play none none none",
                        }
                    }
                );
            });

            // Animate URL parts
            gsap.utils.toArray('.url-part').forEach((part, index) => {
                gsap.fromTo(part,
                    { autoAlpha: 0, scale: 0.8 },
                    {
                        autoAlpha: 1,
                        scale: 1,
                        duration: 0.4,
                        delay: index * 0.2,
                        ease: "back.out(1.7)",
                        scrollTrigger: {
                            trigger: part.parentElement,
                            start: "top 85%",
                            toggleActions: "play none none none",
                        }
                    }
                );
            });
        });
    </script>
</body>
</html>